@{
    ViewBag.Title = "Login";
}

<h2>Login</h2>
<form id="loginForm">
    <input type="text" id="username" placeholder="Username" required />
    <input type="password" id="password" placeholder="Password" required />
    <button type="submit">Login</button>
</form>

<p id="error" style="color:red;"></p>

<script src="~/Scripts/jquery-3.7.0.min.js"></script>
<script>
    $("#loginForm").submit(function (e) {
        e.preventDefault();
        var username = $("#username").val();
        var password = $("#password").val();
        console.log("Username: ",username);
        $.ajax({
            url: "/api/Auth/Login",
            type: "POST",
            contentType: "application/json",   // tell server JSON
            data: JSON.stringify({
                Username: username,
                Password: password
            }),
            success: function (res) {
                // Store JWT
                localStorage.setItem("jwtToken", res.token);
                console.log("password: ", password);
                // Redirect to Chat page
                window.location.href = "/Home/Chatting";
            },
            error: function () {
                $("#error").text("Invalid username or password");
            }
        });
    });
</script>


